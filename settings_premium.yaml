# Ultra Quality-Value Screener Configuration - FMP Premium Plan Optimized

# FMP API - Premium Plan
fmp:
  api_key: "${FMP_API_KEY}"
  base_url: "https://financialmodelingprep.com/api/v3"
  rate_limit_rps: 300  # Premium plan allows 300+ requests/second
  max_retries: 3
  timeout_seconds: 120

# Universe Filters - Global Coverage with Premium Plan
universe:
  # Option 1: All developed markets
  countries: ["US", "CA", "GB", "DE", "FR", "NL", "CH", "SE", "NO", "DK", "AU", "JP", "SG", "HK"]

  # Option 2: Focus on specific regions (uncomment to use)
  # countries: ["US", "CA", "MX"]  # North America
  # countries: ["GB", "DE", "FR", "NL", "CH", "IT", "ES"]  # Europe
  # countries: ["JP", "CN", "HK", "SG", "AU", "IN", "KR"]  # Asia-Pacific

  # Option 3: All countries globally (uncomment to use)
  # countries: []  # Empty = ALL countries

  exchanges: []  # All exchanges in selected countries
  min_market_cap: 1_000_000_000  # $1B+ (can go lower with premium)
  min_avg_dollar_vol_3m: 5_000_000  # $5M daily volume
  top_k: 2000  # Analyze up to 2000 stocks (premium allows this)

# Scoring Weights
scoring:
  weight_value: 0.30
  weight_quality: 0.70
  exclude_reds: true
  threshold_buy: 65
  threshold_monitor: 45
  threshold_buy_amber: 80
  threshold_buy_quality_exceptional: 85

# Guardrail Thresholds
guardrails:
  non_financial:
    altman_z_red: 1.8
    altman_z_amber: 2.99
    beneish_m_red: -1.78
    accruals_noa_amber_percentile: 80
    accruals_noa_red_percentile: 90
    net_share_issuance_red_pct: 10.0
    net_share_issuance_amber_pct: 5.0
    interest_coverage_red: 2.0
    interest_coverage_amber: 3.0
    net_debt_ebitda_red: 6.0
    net_debt_ebitda_amber: 4.0
    debt_maturity_24m_red_pct: 30.0
    debt_maturity_24m_amber_pct: 20.0

  financial:
    cet1_red: 8.0
    cet1_amber: 10.0
    efficiency_ratio_red: 70.0
    efficiency_ratio_amber: 60.0
    loans_to_deposits_red: 100.0
    loans_to_deposits_amber: 90.0

  reit:
    ffo_payout_red_pct: 95.0
    ffo_payout_amber_pct: 85.0
    net_debt_ebitda_red: 8.0
    net_debt_ebitda_amber: 6.0
    occupancy_red_pct: 85.0
    occupancy_amber_pct: 90.0
    debt_to_gross_assets_red_pct: 60.0
    debt_to_gross_assets_amber_pct: 50.0

# Caching - More aggressive refresh with premium
cache:
  ttl_universe_hours: 4  # Refresh every 4 hours (vs 12)
  ttl_symbol_hours: 24  # Daily refresh (vs 48h)
  ttl_qualitative_hours: 12  # Twice daily (vs 24h)
  cache_dir: "./cache"

# Logging
logging:
  level: "INFO"
  log_dir: "./logs"
  log_file: "screener.log"

# Output
output:
  csv_path: "./data/screener_results.csv"
  metrics_log_path: "./logs/pipeline_metrics.json"

# Premium Features Configuration
premium:
  enable_insider_trading: true  # ✅ Implemented - Analyzes insider buy/sell clusters
  enable_institutional_ownership: false  # TODO: Implement
  enable_earnings_transcripts: true  # ✅ Implemented - NLP sentiment analysis of earnings calls
  enable_real_time_prices: false  # TODO: Implement
